(function(t){function e(e){for(var s,o,n=e[0],l=e[1],d=e[2],u=0,h=[];u<n.length;u++)o=n[u],a[o]&&h.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(h.length)h.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},a={app:0},r=[];function o(t){return n.p+"js/"+({history:"history",player:"player",settings:"settings"}[t]||t)+"."+{history:"ff38a693",player:"d09fd3b1",settings:"9a810106"}[t]+".js"}function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(t){var e=[],i=a[t];if(0!==i)if(i)e.push(i[2]);else{var s=new Promise(function(e,s){i=a[t]=[e,s]});e.push(i[2]=s);var r,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,n.nc&&d.setAttribute("nonce",n.nc),d.src=o(t),r=function(e){d.onerror=d.onload=null,clearTimeout(u);var i=a[t];if(0!==i){if(i){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+s+": "+r+")");o.type=s,o.request=r,i[1](o)}a[t]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:d})},12e4);d.onerror=d.onload=r,l.appendChild(d)}return Promise.all(e)},n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="app://./",n.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var c=d;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0a05":function(t,e){t.exports=require("constants")},"1fc2":function(t,e,i){},2849:function(t,e){t.exports=require("http")},"34bb":function(t,e){t.exports=require("electron")},"353d":function(t,e,i){"use strict";var s=i("1fc2"),a=i.n(s);a.a},"3c93":function(t,e){t.exports=require("crypto")},"42cd":function(t,e){t.exports=require("assert")},"43b3":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discover-banner max-w-full text-white pl-8 rounded-bl-lg pt-5 mb-8 flex"},[i("div",{staticClass:"w-1/2 flex-1"},[i("h1",{staticClass:"font-normal mb-2"},[t._v("Video Downloader")]),i("p",{staticClass:"w-64 leading-normal text-grey-lighter"},[t._v(t._s(t.title))])]),i("div",{staticClass:"w-1/2 py-1 px-1 pr-12 text-white text-right"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])])])},a=[],r={props:["title"]},o=r,n=i("2877"),l=Object(n["a"])(o,s,a,!1,null,null,null);l.options.__file="Title.vue";e["a"]=l.exports},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"font-sans flex-1 min-h-screen bg-black",staticStyle:{"-webkit-user-select":"none"},attrs:{id:"app"}},[i("sidebar"),i("flash-message",{staticClass:"message"}),i("keep-alive",{attrs:{include:["download","search"]}},[i("router-view")],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-56 bg-grey-darkest text-white border-r border-backblack fixed min-h-screen pt-3",staticStyle:{"-webkit-app-region":"drag"}},[i("div",{staticClass:"w-full flex-1 pl-4 pt-1"},[i("button",{staticClass:"clickable select-none text-white bg-red-light rounded-full button-window",on:{click:t.close}},[i("svg",{attrs:{width:"12px",height:"12px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1175 1321l146-146q10-10 10-23t-10-23l-233-233 233-233q10-10 10-23t-10-23l-146-146q-10-10-23-10t-23 10l-233 233-233-233q-10-10-23-10t-23 10l-146 146q-10 10-10 23t10 23l233 233-233 233q-10 10-10 23t10 23l146 146q10 10 23 10t23-10l233-233 233 233q10 10 23 10t23-10zm617-1033v1216q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1472q66 0 113 47t47 113z"}})])]),i("button",{staticClass:"clickable select-none ml-1 text-white bg-blue-dark rounded-full button-window",on:{click:t.hide}},[i("svg",{attrs:{width:"12px",height:"12px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1792 1312v192q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-192q0-66 47-113t113-47h1472q66 0 113 47t47 113z"}})])])]),i("div",{staticClass:"sidebar-icons clickable pt-6"},[i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"}})]),i("div",{staticClass:"text-white"},[t._v("Search")])]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline ",attrs:{to:"/download"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 20 20"}},[i("path",{attrs:{fill:"currentColor",d:"M0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm6 0v12h8V4H6zM2 5v2h2V5H2zm0 4v2h2V9H2zm0 4v2h2v-2H2zm14-8v2h2V5h-2zm0 4v2h2V9h-2zm0 4v2h2v-2h-2zM8 7l5 3-5 3V7z"}})]),i("div",{staticClass:"text-white flex"},[t._v("YouTube \n      ")]),t.videoCount>0?i("div",{staticClass:"bg-red-light text-white  rounded ml-1 pl-1 pr-2 pb-1  "},[i("i",[i("small",[t._v(t._s(t.videoCount))])])]):t._e()]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/history"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298zm-640-288v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23z"}})]),i("div",{staticClass:"text-white"},[t._v("History")])]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/settings"}},[i("svg",{staticClass:"mr-3",attrs:{fill:"currentColor",width:"24px",height:"24px",viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M 9.6679688 2 L 9.1757812 4.5234375 C 8.3550224 4.8338012 7.5961042 5.2674041 6.9296875 5.8144531 L 4.5058594 4.9785156 L 2.1738281 9.0214844 L 4.1132812 10.707031 C 4.0445153 11.128986 4 11.558619 4 12 C 4 12.441381 4.0445153 12.871014 4.1132812 13.292969 L 2.1738281 14.978516 L 4.5058594 19.021484 L 6.9296875 18.185547 C 7.5961042 18.732596 8.3550224 19.166199 9.1757812 19.476562 L 9.6679688 22 L 14.332031 22 L 14.824219 19.476562 C 15.644978 19.166199 16.403896 18.732596 17.070312 18.185547 L 19.494141 19.021484 L 21.826172 14.978516 L 19.886719 13.292969 C 19.955485 12.871014 20 12.441381 20 12 C 20 11.558619 19.955485 11.128986 19.886719 10.707031 L 21.826172 9.0214844 L 19.494141 4.9785156 L 17.070312 5.8144531 C 16.403896 5.2674041 15.644978 4.8338012 14.824219 4.5234375 L 14.332031 2 L 9.6679688 2 z M 12 8 C 14.209 8 16 9.791 16 12 C 16 14.209 14.209 16 12 16 C 9.791 16 8 14.209 8 12 C 8 9.791 9.791 8 12 8 z"}})]),i("div",{staticClass:"text-white"},[t._v("Settings")])])],1)])},n=[],l=i("34bb"),d={methods:{close:function(){l["ipcRenderer"].send("close-app")},hide:function(){l["ipcRenderer"].send("hide-app")}},computed:{videoCount:{get:function(){return this.$eventBus.videoIds.length}}}},u=d,c=i("2877"),h=Object(c["a"])(u,o,n,!1,null,null,null);h.options.__file="Sidebar.vue";var p=h.exports;i("77ed");const g=new s["a"];window.onerror=function(t,e){return g.$emit("onError",t,e),!0};var v={components:{Sidebar:p},data(){return{modal:!1}},created(){g.$on("onError",(t,e)=>{this.flash("<b>Application error: </b> "+t+" <br/><br/> <small><i>"+e+"</i></small>","error",{timeout:1e4})}),this.$router.push("/")}},f=v,w=(i("353d"),Object(c["a"])(f,a,r,!1,null,null,null));w.options.__file="App.vue";var m=w.exports,x=i("8c4f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-black text-white flex-1 ml-56 pl-6"},[i("headerapp",{attrs:{title:"YouTube search"}}),i("loading",{attrs:{active:t.isLoading,opacity:.1,color:"white"},on:{"update:active":function(e){t.isLoading=e}}}),i("div",{staticClass:"flex-1 text-left mb-3"},[i("label",{staticClass:"font-light mr-3"},[t._v("YouTube search:")]),i("div",{staticClass:"w-full flex search-container text-center relative"},[i("input",{ref:"search",staticClass:"bg-black text-grey-light w-full h-9 pl-8 border-b outline-none ",attrs:{type:"text"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(t.$refs.search.value)}}}),i("div",{staticClass:"absolute pin-t py-2 px-1 text-grey-light"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18",height:"18"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue h-9 w-10 ml-3 py-2 rounded mr-10",on:{click:function(e){t.searchPlayList(t.$refs.search.value)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18px",height:"18px"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])])])]),i("div",{staticClass:"flex flex-wrap pr-6"},t._l(t.items,function(e){return i("search-item",{key:e.videoId,attrs:{item:e},on:{onDownload:t.onDownload}})}),1)],1)},y=[],C=(i("ac6a"),i("386d"),i("43b3")),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"router-animation","enter-active-class":"animated slideInUp faster"}},[i("div",{staticClass:"bg-grey-darkest text-white flex mr-3 mb-3 h-28 rounded"},[i("div",{staticClass:"ml-3 mt-3 w-32 rounded"},[i("img",{attrs:{src:t.img,alt:"icon"}})]),i("div",{staticClass:"w-75 my-3 ml-1"},[i("div",{staticClass:"text-base w-full h-13 relative"},[t._v(t._s(t.item.title))]),i("div",{staticClass:"flex w-full"},[i("div",{staticClass:"flex-1 mt-4"},[i("div",{staticClass:"text-grey-light text-xs mt-1 mb-1"},[t._v("Author: "+t._s(t.item.author.name))])]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.play()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M4 4l12 6-12 6z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue mr-3 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.$emit("onDownload",t.item.url,t.item.title)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])])])])])])},q=[],k={name:"search-item",props:["item"],data(){return{}},methods:{play(){this.$router.push({name:"player",params:{url:"https://www.youtube.com"+this.item.url,title:this.item.title,router:"search"}})}},computed:{img(){return"https://img.youtube.com/vi/"+this.item.videoId+"/default.jpg"}}},D=k,L=Object(c["a"])(D,_,q,!1,null,null,null);L.options.__file="SearchItem.vue";var $=L.exports,z=i("9062"),M=i.n(z),I=(i("e40d"),i("9056")),V=i.n(I),S={name:"search",components:{headerapp:C["a"],SearchItem:$,Loading:M.a},data(){return{isLoading:!1,items:[]}},methods:{searchPlayList(t){this.isLoading=!0;const e=this;V()(t,function(i,s){i?e.search(t):(e.items=[],s.items.forEach(t=>{const i={title:t.title,url:"/watch?v="+t.id,author:{name:t.author.name},videoId:t.id};console.log(i),e.items.push(i)}))}),this.isLoading=!1},search(t){if(console.log(t),""!=t.trim()){this.isLoading=!0;try{this.items=l["ipcRenderer"].sendSync("yt-search",t)}finally{this.isLoading=!1}}else this.items=[]},onDownload(t,e){console.log(t),this.$eventBus.$emit("onAddVideo","https://www.youtube.com"+t),this.flash("Video <b>"+e+"</b> has been added to download list","alert-warning",{timeout:1e3,displayIcons:!0,icons:"warning"});for(var i=this.items.length;i--;)if(this.items[i].url===t)return void this.items.splice(i,1)}}},E=S,j=Object(c["a"])(E,b,y,!1,null,null,null);j.options.__file="Search.vue";var B=j.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-black text-white flex-1 ml-56 pl-6"},[i("headerapp",{attrs:{title:"Download"}}),i("div",{staticClass:"flex-1 text-left mb-3"},[i("label",{staticClass:"font-light mr-3"},[t._v("YouTube address:")]),i("div",{staticClass:"w-full flex search-container text-center relative"},[i("input",{ref:"url",staticClass:"bg-black text-grey-light w-full h-9 pl-8 border-b outline-none",attrs:{type:"text",placeholder:"https://www.youtube.com"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.addVideoPlayList(t.$refs.url.value)}}}),i("div",{staticClass:"absolute pin-t py-2 px-1 text-grey-light"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18",height:"18"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue h-9 w-10 ml-3 py-2 rounded mr-10",on:{click:function(e){t.addVideoPlayList(t.$refs.url.value)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18px",height:"18px"}},[i("path",{attrs:{d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"}})])])])]),i("div",{ref:"downloadItems",staticClass:"flex flex-wrap pr-6"})],1)},F=[],H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"router-animation","enter-active-class":"animated slideInUp faster"}},[i("div",{staticClass:"bg-grey-darkest text-white flex mr-3 mb-3 h-28 rounded"},[i("loading",{attrs:{active:t.isLoading,opacity:.1,color:"white"},on:{"update:active":function(e){t.isLoading=e}}}),i("div",{staticClass:"ml-3 mt-3 w-32 rounded"},[i("img",{attrs:{src:t.thumbnailUrl,alt:""}})]),i("div",{staticClass:"w-75 mt-3 ml-1 pr-2"},[i("div",{staticClass:"text-base w-full h-10 relative"},[t._v(t._s(t.title))]),i("div",{staticClass:"flex w-full"},[i("div",{staticClass:"shadow w-full bg-grey-light text-grey-darkest "},[i("div",{staticClass:"bg-orange text-s leading-none",style:{width:t.progress+"%"}},[t._v("_")])])]),i("div",{staticClass:"flex w-full pt-1"},[i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-grey-light text-xs mt-1 mb-1"},[t._v("Author: "+t._s(t.author))]),t.size?i("div",{staticClass:"text-grey-light text-xs"},[t._v("Size: "+t._s(t.size))]):t._e()]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.play()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M4 4l12 6-12 6z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.del()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}})])]),t.isDownloading?t._e():i("button",{staticClass:"uppercase text-white bg-blue h-10 w-10 px-1 rounded-full",on:{click:function(e){t.download()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])]),t.isDownloading?i("button",{staticClass:"uppercase text-white bg-blue h-10 w-10 px-1 rounded-full",on:{click:function(e){t.cancel()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}})])]):t._e()])])],1)])},P=[],A=(i("6b54"),i("a481"),i("ade3"));class T{static slugify(t){return t=t.replace(this._slugify_strip_re,"").trim().toLowerCase(),t=t.replace(this._slugify_hyphenate_re,"-"),t}}Object(A["a"])(T,"_slugify_strip_re",/[^\w\s-]/g),Object(A["a"])(T,"_slugify_hyphenate_re",/[-\s]+/g);var U=T;const R=i("949d");var Y,J,N={name:"download-item",props:["url","itemId","destinanionFolder","autoDownload"],components:{Loading:M.a},data(){return{progress:0,thumbnailUrl:"",title:" ",author:" ",size:"",isLoading:!0,isDownloading:!1}},mounted(){this.isLoading=!0,R.getInfo(this.url,(t,e)=>{if(this.isLoading=!1,t)throw t;this.thumbnailUrl=e.thumbnail_url,this.title=e.title,this.author=e.author.name,this.autoDownload&&this.download()})},methods:{play(){this.$emit("playVideo",this.url,this.title)},del(){this.cancel(),this.$emit("deleteItem",this.itemId)},cancel(){void 0!==Y&&(Y.unpipe(J),Y.destroy()),this.progress=0,this.isDownloading=!1},download(){const t=i("a32b"),e=i("9b0f"),s=this,a=t.resolve(this.destinanionFolder.toString().replace("\\","\\\\"),U.slugify(this.title.toString())+".mp4");R.getInfo(this.url,(t,i)=>{if(t)throw t;Y=R.downloadFromInfo(i,{filter:t=>"mp4"===t.container}),J=e.createWriteStream(a),Y.pipe(J),this.isDownloading=!0,Y.on("progress",(t,e,i)=>{this.size=(i/1e6).toFixed(0).toString()+" MB";const s=e/i;this.progress=(100*s).toFixed(0)}),Y.on("end",()=>{this.isDownloading=!1,this.addHistory(this.url,this.title,this.thumbnailUrl),l["ipcRenderer"].send("downloaded",this.title),s.$emit("deleteItem",this.itemId)})})},addHistory(t,e,i){const s={videoUrl:t,imgUrl:i,title:e,dateExec:new Date};l["ipcRenderer"].send("history-add",s)}}},W=N,G=Object(c["a"])(W,H,P,!1,null,null,null);G.options.__file="DownloadItem.vue";var K=G.exports,Q=i("f6dd"),X={name:"download",components:{headerapp:C["a"]},data(){return{itemCount:0}},mounted(){this.$appData.videoIds.forEach(t=>{this.prepareVideo(t)}),this.$eventBus.$on("onAddVideo",t=>{console.log(t),this.prepareVideo(t)})},methods:{story(t){this.$router.push({name:"download-item",params:{url:t}})},addVideoPlayList(t){const e=this;V()(t,function(i,s){i?e.addVideo(t):s.items.forEach(t=>{e.addVideo(t.url)})})},addVideo(t){this.$eventBus.$emit("onAddVideo",t)},prepareVideo(t){this.itemCount++;const e="DOWNLOAD_ITEM-"+this.itemCount;var i=s["a"].extend(K),a=new i({propsData:{url:t,itemId:e,destinanionFolder:this.$store.getters.destinanionFolder,autoDownload:this.$store.getters.autoDownload}});a.$mount(),a.$el.id=e,this.$refs.downloadItems.appendChild(a.$el),a.ref=Object(Q["b"])(t),a.$on("deleteItem",e=>{const i=document.getElementById(e);void 0!==i&&(this.$eventBus.$emit("onRemoveVideo",t),this.$refs.downloadItems.removeChild(i))}),a.$on("playVideo",(t,e)=>{this.$router.push({name:"player",params:{url:t,title:e,router:"download"}})}),this.$refs.url.value=""}}},Z=X,tt=Object(c["a"])(Z,O,F,!1,null,null,null);tt.options.__file="Download.vue";var et=tt.exports;s["a"].use(x["a"]);var it=new x["a"]({mode:"history",base:require("electron").remote.app.getAppPath(),routes:[{path:"/",name:"search",component:B},{path:"/download",name:"download",component:et},{path:"/settings",name:"settings",component:()=>i.e("settings").then(i.bind(null,"26d3"))},{path:"/history",name:"history",component:()=>i.e("history").then(i.bind(null,"e4bb"))},{path:"/player",name:"player",props:!0,component:()=>i.e("player").then(i.bind(null,"bf5c"))}]}),st=i("2f62"),at=i("e5fa"),rt=(i("55dd"),i("a32b")),ot=i.n(rt),nt=i("9b0f"),lt=i.n(nt),dt=i("5d2d"),ut=i.n(dt),ct={database:null,defaultSettings:{destinationFolder:"",autoDownload:!1},initDatabase(t,e){const i=ot.a.join(t,"data.json");this.database=new ut.a(i,{autosave:!0}),lt.a.existsSync(i)||(this._prepareCollection("settings"),this._prepareCollection("history")),this.database.loadDatabase(null,t=>{if(t)throw t;e()})},closeDatabase(t){var e=this;this.database.saveDatabase(function(i){if(i)throw i;e.database.close(()=>{t()})})},_prepareCollection(t){this.database.addCollection(t),this.database.saveDatabase(function(t){if(t)throw t})},settings(t){var e=null,i=this.database.getCollection("settings");null!=i&&void 0!=i&&i.data.length>0&&(e=i.data[0]),null!=e&&void 0!=e||(e=this.defaultSettings),t(e)},updateSettings(t){var e=this.database.getCollection("settings");null==e&&void 0==e&&(this._prepareCollection("settings"),e=this.database.getCollection("settings")),e.clear(),e.insert({destinationFolder:t.destinationFolder,autoDownload:t.autoDownload}),e.flushChanges()},history(t){var e=this.database.getCollection("history");t(null!=e&&void 0!=e?e.chain().sort(function(t,e){return t.dateExec===e.dateExec?0:t.dateExec>e.dateExec?-1:t.dateExec<e.dateExec?1:void 0}).limit(100).data():[])},historyAdd(t,e){var i=this.database.getCollection("history");null==i&&void 0==i&&(this._prepareCollection("history"),i=this.database.getCollection("history")),i.insert({videoUrl:t.videoUrl,imgUrl:t.imgUrl,title:t.title,dateExec:t.dateExec}),i.flushChanges(),e(null)},historyClear(t){var e=this.database.getCollection("history");null==e&&void 0==e&&(this._prepareCollection("history"),e=this.database.getCollection("history")),e.clear(),e.flushChanges(),t(null)}};s["a"].use(st["a"]);var ht=new st["a"].Store({state:{settings:{destinationFolder:"",autoDownload:!1}},mutations:{updateDestinanionFolder(t,e){t.settings.destinationFolder=e},updateAutoDownload(t,e){t.settings.autoDownload=e},updateSettings(t,e){t.settings=e},closeDatabase(){}},getters:{destinanionFolder:t=>{return t.settings.destinationFolder},autoDownload:t=>{return t.settings.autoDownload},settings:t=>{return t.settings}},actions:{updateDestinanionFolder(t,e){t.commit("updateDestinanionFolder",e)},updateAutoDownload(t,e){t.commit("updateAutoDownload",e)},initDatabase(t,e){ct.initDatabase(e,()=>{ct.settings(i=>{void 0==i.destinationFolder&&(i.destinationFolder=e),t.commit("updateSettings",i)})})},closeDatabase(t){ct.updateSettings(t.getters.settings),ct.closeDatabase(()=>{t.commit("closeDatabase")})}},plugins:[Object(at["createPersistedState"])(),Object(at["createSharedMutations"])()],strict:!1}),pt=i("d00d"),gt=i.n(pt);i("f59c");const vt=new s["a"]({data:{videoIds:[]}});vt.$on("onAddVideo",t=>{vt.videoIds.push(t),console.log(t)}),vt.$on("onRemoveVideo",t=>{for(var e=vt.videoIds.length;e--;)if(vt.videoIds[e]===t)return void vt.videoIds.splice(e,1)});var ft={install(t){Object.defineProperties(t.prototype,{$eventBus:{get:function(){return vt}},$appData:{get:function(){return vt}}})}};s["a"].use(ft),s["a"].use(gt.a),s["a"].use(Q["a"]),s["a"].use(M.a),s["a"].config.productionTip=!1,new s["a"]({router:it,store:ht,render:t=>t(m)}).$mount("#app")},"6f3a":function(t,e){t.exports=require("url")},"8cad":function(t,e){t.exports=require("util")},"8e57":function(t,e){t.exports=require("os")},"9ac2":function(t,e){t.exports=require("stream")},"9b0f":function(t,e){t.exports=require("fs")},a32b:function(t,e){t.exports=require("path")},b658:function(t,e){t.exports=require("string_decoder")},ed62:function(t,e){t.exports=require("https")},f319:function(t,e){t.exports=require("querystring")},ff4a:function(t,e){t.exports=require("events")}});
//# sourceMappingURL=app.8e7f600f.js.map