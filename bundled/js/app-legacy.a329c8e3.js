(function(t){function e(e){for(var n,a,r=e[0],l=e[1],u=e[2],d=0,h=[];d<r.length;d++)a=r[d],o[a]&&h.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},s=[];function a(t){return r.p+"js/"+({history:"history",player:"player",settings:"settings"}[t]||t)+"-legacy."+{history:"a9115bff",player:"714f63e0",settings:"4f73d490"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],i=o[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise(function(e,n){i=o[t]=[e,n]});e.push(i[2]=n);var s,l=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=a(t),s=function(e){u.onerror=u.onload=null,clearTimeout(d);var i=o[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");a.type=n,a.request=s,i[1](a)}o[t]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,l.appendChild(u)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="app://./",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var c=u;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0a05":function(t,e){t.exports=require("constants")},"1fc2":function(t,e,i){},2849:function(t,e){t.exports=require("http")},"34bb":function(t,e){t.exports=require("electron")},"353d":function(t,e,i){"use strict";var n=i("1fc2"),o=i.n(n);o.a},"3c93":function(t,e){t.exports=require("crypto")},"42cd":function(t,e){t.exports=require("assert")},"43b3":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discover-banner max-w-full text-white pl-8 rounded-bl-lg pt-5 mb-8 flex"},[i("div",{staticClass:"w-1/2 flex-1"},[i("h1",{staticClass:"font-normal mb-2"},[t._v("Video Downloader")]),i("p",{staticClass:"w-64 leading-normal text-grey-lighter"},[t._v(t._s(t.title))])]),i("div",{staticClass:"w-1/2 py-1 px-1 pr-12 text-white text-right"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])])])},o=[],s=(i("cadf"),i("551c"),i("097d"),{props:["title"]}),a=s,r=i("2877"),l=Object(r["a"])(a,n,o,!1,null,null,null);l.options.__file="Title.vue";e["a"]=l.exports},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"font-sans flex-1 min-h-screen bg-black",staticStyle:{"-webkit-user-select":"none"},attrs:{id:"app"}},[i("sidebar"),i("flash-message",{staticClass:"message"}),i("keep-alive",{attrs:{include:["download","search"]}},[i("router-view")],1)],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-56 bg-grey-darkest text-white border-r border-backblack fixed min-h-screen pt-3",staticStyle:{"-webkit-app-region":"drag"}},[i("div",{staticClass:"w-full flex-1 pl-4 pt-1"},[i("button",{staticClass:"clickable select-none text-white bg-red-light rounded-full button-window",on:{click:t.close}},[i("svg",{attrs:{width:"12px",height:"12px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1175 1321l146-146q10-10 10-23t-10-23l-233-233 233-233q10-10 10-23t-10-23l-146-146q-10-10-23-10t-23 10l-233 233-233-233q-10-10-23-10t-23 10l-146 146q-10 10-10 23t10 23l233 233-233 233q-10 10-10 23t10 23l146 146q10 10 23 10t23-10l233-233 233 233q10 10 23 10t23-10zm617-1033v1216q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1472q66 0 113 47t47 113z"}})])]),i("button",{staticClass:"clickable select-none ml-1 text-white bg-blue-dark rounded-full button-window",on:{click:t.hide}},[i("svg",{attrs:{width:"12px",height:"12px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1792 1312v192q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-192q0-66 47-113t113-47h1472q66 0 113 47t47 113z"}})])])]),i("div",{staticClass:"sidebar-icons clickable pt-6"},[i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"}})]),i("div",{staticClass:"text-white"},[t._v("Search")])]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline ",attrs:{to:"/download"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 20 20"}},[i("path",{attrs:{fill:"currentColor",d:"M0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm6 0v12h8V4H6zM2 5v2h2V5H2zm0 4v2h2V9H2zm0 4v2h2v-2H2zm14-8v2h2V5h-2zm0 4v2h2V9h-2zm0 4v2h2v-2h-2zM8 7l5 3-5 3V7z"}})]),i("div",{staticClass:"text-white flex"},[t._v("YouTube \n      ")]),t.videoCount>0?i("div",{staticClass:"bg-red-light text-white  rounded ml-1 pl-1 pr-2 pb-1  "},[i("i",[i("small",[t._v(t._s(t.videoCount))])])]):t._e()]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/history"}},[i("svg",{staticClass:"mr-3",attrs:{width:"24px",height:"24px",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"currentColor",d:"M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298zm-640-288v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23z"}})]),i("div",{staticClass:"text-white"},[t._v("History")])]),i("router-link",{staticClass:"sidebar-icon flex items-center px-4 py-2 text-grey cursor-pointer hover:bg-grey-darker no-underline",attrs:{to:"/settings"}},[i("svg",{staticClass:"mr-3",attrs:{fill:"currentColor",width:"24px",height:"24px",viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M 9.6679688 2 L 9.1757812 4.5234375 C 8.3550224 4.8338012 7.5961042 5.2674041 6.9296875 5.8144531 L 4.5058594 4.9785156 L 2.1738281 9.0214844 L 4.1132812 10.707031 C 4.0445153 11.128986 4 11.558619 4 12 C 4 12.441381 4.0445153 12.871014 4.1132812 13.292969 L 2.1738281 14.978516 L 4.5058594 19.021484 L 6.9296875 18.185547 C 7.5961042 18.732596 8.3550224 19.166199 9.1757812 19.476562 L 9.6679688 22 L 14.332031 22 L 14.824219 19.476562 C 15.644978 19.166199 16.403896 18.732596 17.070312 18.185547 L 19.494141 19.021484 L 21.826172 14.978516 L 19.886719 13.292969 C 19.955485 12.871014 20 12.441381 20 12 C 20 11.558619 19.955485 11.128986 19.886719 10.707031 L 21.826172 9.0214844 L 19.494141 4.9785156 L 17.070312 5.8144531 C 16.403896 5.2674041 15.644978 4.8338012 14.824219 4.5234375 L 14.332031 2 L 9.6679688 2 z M 12 8 C 14.209 8 16 9.791 16 12 C 16 14.209 14.209 16 12 16 C 9.791 16 8 14.209 8 12 C 8 9.791 9.791 8 12 8 z"}})]),i("div",{staticClass:"text-white"},[t._v("Settings")])])],1)])},r=[],l=i("34bb"),u={methods:{close:function(){l["ipcRenderer"].send("close-app")},hide:function(){l["ipcRenderer"].send("hide-app")}},computed:{videoCount:{get:function(){return this.$eventBus.videoIds.length}}}},d=u,c=i("2877"),h=Object(c["a"])(d,a,r,!1,null,null,null);h.options.__file="Sidebar.vue";var p=h.exports,f=(i("77ed"),new n["a"]);window.onerror=function(t,e){return f.$emit("onError",t,e),!0};var v={components:{Sidebar:p},data:function(){return{modal:!1}},created:function(){var t=this;f.$on("onError",function(e,i){t.flash("<b>Application error: </b> "+e+" <br/><br/> <small><i>"+i+"</i></small>","error",{timeout:1e4})}),this.$router.push("/")}},g=v,w=(i("353d"),Object(c["a"])(g,o,s,!1,null,null,null));w.options.__file="App.vue";var m=w.exports,b=i("8c4f"),x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-black text-white flex-1 ml-56 pl-6"},[i("headerapp",{attrs:{title:"YouTube search"}}),i("loading",{attrs:{active:t.isLoading,opacity:.1,color:"white"},on:{"update:active":function(e){t.isLoading=e}}}),i("div",{staticClass:"flex-1 text-left mb-3"},[i("label",{staticClass:"font-light mr-3"},[t._v("YouTube search:")]),i("div",{staticClass:"w-full flex search-container text-center relative"},[i("input",{ref:"search",staticClass:"bg-black text-grey-light w-full h-9 pl-8 border-b outline-none ",attrs:{type:"text"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(t.$refs.search.value)}}}),i("div",{staticClass:"absolute pin-t py-2 px-1 text-grey-light"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18",height:"18"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue h-9 w-10 ml-3 py-2 rounded mr-10",on:{click:function(e){t.searchPlayList(t.$refs.search.value)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18px",height:"18px"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])])])]),i("div",{staticClass:"flex flex-wrap pr-6"},t._l(t.items,function(e){return i("search-item",{key:e.videoId,attrs:{item:e},on:{onDownload:t.onDownload}})}),1)],1)},y=[],C=(i("7f7f"),i("ac6a"),i("386d"),i("43b3")),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"router-animation","enter-active-class":"animated slideInUp faster"}},[i("div",{staticClass:"bg-grey-darkest text-white flex mr-3 mb-3 h-28 rounded"},[i("div",{staticClass:"ml-3 mt-3 w-32 rounded"},[i("img",{attrs:{src:t.img,alt:"icon"}})]),i("div",{staticClass:"w-75 my-3 ml-1"},[i("div",{staticClass:"text-base w-full h-13 relative"},[t._v(t._s(t.item.title))]),i("div",{staticClass:"flex w-full"},[i("div",{staticClass:"flex-1 mt-4"},[i("div",{staticClass:"text-grey-light text-xs mt-1 mb-1"},[t._v("Author: "+t._s(t.item.author.name))])]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.play()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M4 4l12 6-12 6z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue mr-3 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.$emit("onDownload",t.item.url,t.item.title)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])])])])])])},q=[],k={name:"search-item",props:["item"],data:function(){return{}},methods:{play:function(){this.$router.push({name:"player",params:{url:"https://www.youtube.com"+this.item.url,title:this.item.title,router:"search"}})}},computed:{img:function(){return"https://img.youtube.com/vi/"+this.item.videoId+"/default.jpg"}}},D=k,L=Object(c["a"])(D,_,q,!1,null,null,null);L.options.__file="SearchItem.vue";var $=L.exports,z=i("9062"),M=i.n(z),I=(i("e40d"),i("9056")),V=i.n(I),S={name:"search",components:{headerapp:C["a"],SearchItem:$,Loading:M.a},data:function(){return{isLoading:!1,items:[]}},methods:{searchPlayList:function(t){this.isLoading=!0;var e=this;V()(t,function(i,n){i?e.search(t):(e.items=[],n.items.forEach(function(t){var i={title:t.title,url:"/watch?v="+t.id,author:{name:t.author.name},videoId:t.id};console.log(i),e.items.push(i)}))}),this.isLoading=!1},search:function(t){if(console.log(t),""!=t.trim()){this.isLoading=!0;try{this.items=l["ipcRenderer"].sendSync("yt-search",t)}finally{this.isLoading=!1}}else this.items=[]},onDownload:function(t,e){console.log(t),this.$eventBus.$emit("onAddVideo","https://www.youtube.com"+t),this.flash("Video <b>"+e+"</b> has been added to download list","alert-warning",{timeout:1e3,displayIcons:!0,icons:"warning"});for(var i=this.items.length;i--;)if(this.items[i].url===t)return void this.items.splice(i,1)}}},j=S,E=Object(c["a"])(j,x,y,!1,null,null,null);E.options.__file="Search.vue";var B=E.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-black text-white flex-1 ml-56 pl-6"},[i("headerapp",{attrs:{title:"Download"}}),i("div",{staticClass:"flex-1 text-left mb-3"},[i("label",{staticClass:"font-light mr-3"},[t._v("YouTube address:")]),i("div",{staticClass:"w-full flex search-container text-center relative"},[i("input",{ref:"url",staticClass:"bg-black text-grey-light w-full h-9 pl-8 border-b outline-none",attrs:{type:"text",placeholder:"https://www.youtube.com"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.addVideoPlayList(t.$refs.url.value)}}}),i("div",{staticClass:"absolute pin-t py-2 px-1 text-grey-light"},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18",height:"18"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue h-9 w-10 ml-3 py-2 rounded mr-10",on:{click:function(e){t.addVideoPlayList(t.$refs.url.value)}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"18px",height:"18px"}},[i("path",{attrs:{d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"}})])])])]),i("div",{ref:"downloadItems",staticClass:"flex flex-wrap pr-6"})],1)},F=[],H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"router-animation","enter-active-class":"animated slideInUp faster"}},[i("div",{staticClass:"bg-grey-darkest text-white flex mr-3 mb-3 h-28 rounded"},[i("loading",{attrs:{active:t.isLoading,opacity:.1,color:"white"},on:{"update:active":function(e){t.isLoading=e}}}),i("div",{staticClass:"ml-3 mt-3 w-32 rounded"},[i("img",{attrs:{src:t.thumbnailUrl,alt:""}})]),i("div",{staticClass:"w-75 mt-3 ml-1 pr-2"},[i("div",{staticClass:"text-base w-full h-10 relative"},[t._v(t._s(t.title))]),i("div",{staticClass:"flex w-full"},[i("div",{staticClass:"shadow w-full bg-grey-light text-grey-darkest "},[i("div",{staticClass:"bg-orange text-s leading-none",style:{width:t.progress+"%"}},[t._v("_")])])]),i("div",{staticClass:"flex w-full pt-1"},[i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-grey-light text-xs mt-1 mb-1"},[t._v("Author: "+t._s(t.author))]),t.size?i("div",{staticClass:"text-grey-light text-xs"},[t._v("Size: "+t._s(t.size))]):t._e()]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.play()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"16px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M4 4l12 6-12 6z"}})])]),i("button",{staticClass:"uppercase text-white bg-blue mr-2 h-10 w-10 px-1 rounded-full",on:{click:function(e){t.del()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 18 18"}},[i("path",{attrs:{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}})])]),t.isDownloading?t._e():i("button",{staticClass:"uppercase text-white bg-blue h-10 w-10 px-1 rounded-full",on:{click:function(e){t.download()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"}})])]),t.isDownloading?i("button",{staticClass:"uppercase text-white bg-blue h-10 w-10 px-1 rounded-full",on:{click:function(e){t.cancel()}}},[i("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 20 20"}},[i("path",{attrs:{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}})])]):t._e()])])],1)])},P=[],A=(i("6b54"),i("a481"),i("d4ec")),T=i("bee2"),U=i("ade3"),R=function(){function t(){Object(A["a"])(this,t)}return Object(T["a"])(t,null,[{key:"slugify",value:function(t){return t=t.replace(this._slugify_strip_re,"").trim().toLowerCase(),t=t.replace(this._slugify_hyphenate_re,"-"),t}}]),t}();Object(U["a"])(R,"_slugify_strip_re",/[^\w\s-]/g),Object(U["a"])(R,"_slugify_hyphenate_re",/[-\s]+/g);var Y,J,N=R,W=i("949d"),G={name:"download-item",props:["url","itemId","destinanionFolder","autoDownload"],components:{Loading:M.a},data:function(){return{progress:0,thumbnailUrl:"",title:" ",author:" ",size:"",isLoading:!0,isDownloading:!1}},mounted:function(){var t=this;this.isLoading=!0,W.getInfo(this.url,function(e,i){if(t.isLoading=!1,e)throw e;t.thumbnailUrl=i.thumbnail_url,t.title=i.title,t.author=i.author.name,t.autoDownload&&t.download()})},methods:{play:function(){this.$emit("playVideo",this.url,this.title)},del:function(){this.cancel(),this.$emit("deleteItem",this.itemId)},cancel:function(){void 0!==Y&&(Y.unpipe(J),Y.destroy()),this.progress=0,this.isDownloading=!1},download:function(){var t=this,e=i("a32b"),n=i("9b0f"),o=this,s=e.resolve(this.destinanionFolder.toString().replace("\\","\\\\"),N.slugify(this.title.toString())+".mp4");W.getInfo(this.url,function(e,i){if(e)throw e;Y=W.downloadFromInfo(i,{filter:function(t){return"mp4"===t.container}}),J=n.createWriteStream(s),Y.pipe(J),t.isDownloading=!0,Y.on("progress",function(e,i,n){t.size=(n/1e6).toFixed(0).toString()+" MB";var o=i/n;t.progress=(100*o).toFixed(0)}),Y.on("end",function(){t.isDownloading=!1,t.addHistory(t.url,t.title,t.thumbnailUrl),l["ipcRenderer"].send("downloaded",t.title),o.$emit("deleteItem",t.itemId)})})},addHistory:function(t,e,i){var n={videoUrl:t,imgUrl:i,title:e,dateExec:new Date};l["ipcRenderer"].send("history-add",n)}}},K=G,Q=Object(c["a"])(K,H,P,!1,null,null,null);Q.options.__file="DownloadItem.vue";var X=Q.exports,Z=i("f6dd"),tt={name:"download",components:{headerapp:C["a"]},data:function(){return{itemCount:0}},mounted:function(){var t=this;this.$appData.videoIds.forEach(function(e){t.prepareVideo(e)}),this.$eventBus.$on("onAddVideo",function(e){console.log(e),t.prepareVideo(e)})},methods:{story:function(t){this.$router.push({name:"download-item",params:{url:t}})},addVideoPlayList:function(t){var e=this;V()(t,function(i,n){i?e.addVideo(t):n.items.forEach(function(t){e.addVideo(t.url)})})},addVideo:function(t){this.$eventBus.$emit("onAddVideo",t)},prepareVideo:function(t){var e=this;this.itemCount++;var i="DOWNLOAD_ITEM-"+this.itemCount,o=n["a"].extend(X),s=new o({propsData:{url:t,itemId:i,destinanionFolder:this.$store.getters.destinanionFolder,autoDownload:this.$store.getters.autoDownload}});s.$mount(),s.$el.id=i,this.$refs.downloadItems.appendChild(s.$el),s.ref=Object(Z["b"])(t),s.$on("deleteItem",function(i){var n=document.getElementById(i);void 0!==n&&(e.$eventBus.$emit("onRemoveVideo",t),e.$refs.downloadItems.removeChild(n))}),s.$on("playVideo",function(t,i){e.$router.push({name:"player",params:{url:t,title:i,router:"download"}})}),this.$refs.url.value=""}}},et=tt,it=Object(c["a"])(et,O,F,!1,null,null,null);it.options.__file="Download.vue";var nt=it.exports;n["a"].use(b["a"]);var ot=new b["a"]({mode:"history",base:require("electron").remote.app.getAppPath(),routes:[{path:"/",name:"search",component:B},{path:"/download",name:"download",component:nt},{path:"/settings",name:"settings",component:function(){return i.e("settings").then(i.bind(null,"26d3"))}},{path:"/history",name:"history",component:function(){return i.e("history").then(i.bind(null,"e4bb"))}},{path:"/player",name:"player",props:!0,component:function(){return i.e("player").then(i.bind(null,"bf5c"))}}]}),st=i("2f62"),at=i("e5fa"),rt=(i("55dd"),i("a32b")),lt=i.n(rt),ut=i("9b0f"),dt=i.n(ut),ct=i("5d2d"),ht=i.n(ct),pt={database:null,defaultSettings:{destinationFolder:"",autoDownload:!1},initDatabase:function(t,e){var i=lt.a.join(t,"data.json");this.database=new ht.a(i,{autosave:!0}),dt.a.existsSync(i)||(this._prepareCollection("settings"),this._prepareCollection("history")),this.database.loadDatabase(null,function(t){if(t)throw t;e()})},closeDatabase:function(t){var e=this;this.database.saveDatabase(function(i){if(i)throw i;e.database.close(function(){t()})})},_prepareCollection:function(t){this.database.addCollection(t),this.database.saveDatabase(function(t){if(t)throw t})},settings:function(t){var e=null,i=this.database.getCollection("settings");null!=i&&void 0!=i&&i.data.length>0&&(e=i.data[0]),null!=e&&void 0!=e||(e=this.defaultSettings),t(e)},updateSettings:function(t){var e=this.database.getCollection("settings");null==e&&void 0==e&&(this._prepareCollection("settings"),e=this.database.getCollection("settings")),e.clear(),e.insert({destinationFolder:t.destinationFolder,autoDownload:t.autoDownload}),e.flushChanges()},history:function(t){var e=this.database.getCollection("history");t(null!=e&&void 0!=e?e.chain().sort(function(t,e){return t.dateExec===e.dateExec?0:t.dateExec>e.dateExec?-1:t.dateExec<e.dateExec?1:void 0}).limit(100).data():[])},historyAdd:function(t,e){var i=this.database.getCollection("history");null==i&&void 0==i&&(this._prepareCollection("history"),i=this.database.getCollection("history")),i.insert({videoUrl:t.videoUrl,imgUrl:t.imgUrl,title:t.title,dateExec:t.dateExec}),i.flushChanges(),e(null)},historyClear:function(t){var e=this.database.getCollection("history");null==e&&void 0==e&&(this._prepareCollection("history"),e=this.database.getCollection("history")),e.clear(),e.flushChanges(),t(null)}};n["a"].use(st["a"]);var ft=new st["a"].Store({state:{settings:{destinationFolder:"",autoDownload:!1}},mutations:{updateDestinanionFolder:function(t,e){t.settings.destinationFolder=e},updateAutoDownload:function(t,e){t.settings.autoDownload=e},updateSettings:function(t,e){t.settings=e},closeDatabase:function(){}},getters:{destinanionFolder:function(t){return t.settings.destinationFolder},autoDownload:function(t){return t.settings.autoDownload},settings:function(t){return t.settings}},actions:{updateDestinanionFolder:function(t,e){t.commit("updateDestinanionFolder",e)},updateAutoDownload:function(t,e){t.commit("updateAutoDownload",e)},initDatabase:function(t,e){pt.initDatabase(e,function(){pt.settings(function(i){void 0==i.destinationFolder&&(i.destinationFolder=e),t.commit("updateSettings",i)})})},closeDatabase:function(t){pt.updateSettings(t.getters.settings),pt.closeDatabase(function(){t.commit("closeDatabase")})}},plugins:[Object(at["createPersistedState"])(),Object(at["createSharedMutations"])()],strict:!1}),vt=i("d00d"),gt=i.n(vt),wt=(i("f59c"),new n["a"]({data:{videoIds:[]}}));wt.$on("onAddVideo",function(t){wt.videoIds.push(t),console.log(t)}),wt.$on("onRemoveVideo",function(t){for(var e=wt.videoIds.length;e--;)if(wt.videoIds[e]===t)return void wt.videoIds.splice(e,1)});var mt={install:function(t){Object.defineProperties(t.prototype,{$eventBus:{get:function(){return wt}},$appData:{get:function(){return wt}}})}};n["a"].use(mt),n["a"].use(gt.a),n["a"].use(Z["a"]),n["a"].use(M.a),n["a"].config.productionTip=!1,new n["a"]({router:ot,store:ft,render:function(t){return t(m)}}).$mount("#app")},"6f3a":function(t,e){t.exports=require("url")},"8cad":function(t,e){t.exports=require("util")},"8e57":function(t,e){t.exports=require("os")},"9ac2":function(t,e){t.exports=require("stream")},"9b0f":function(t,e){t.exports=require("fs")},a32b:function(t,e){t.exports=require("path")},b658:function(t,e){t.exports=require("string_decoder")},ed62:function(t,e){t.exports=require("https")},f319:function(t,e){t.exports=require("querystring")},ff4a:function(t,e){t.exports=require("events")}});
//# sourceMappingURL=app-legacy.a329c8e3.js.map